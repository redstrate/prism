if(TARGET liblua_static)
    set(LUA_LIBRARY liblua_static)
    set(LUA_INCLUDE_DIR ${CMAKE_BINARY_DIR}/_deps/lua-build/include)
else()
    find_package(LuaJIT REQUIRED)
endif()

add_library(sol INTERFACE)
target_include_directories(sol SYSTEM INTERFACE include ${LUA_INCLUDE_DIR})
target_link_libraries(sol INTERFACE ${LUA_LIBRARY})
target_compile_definitions(sol INTERFACE SOL_ALL_SAFETIES_ON SOL_EXCEPTIONS_SAFE_PROPAGATION)

if(ENABLE_IOS OR ENABLE_TVOS)
target_compile_definitions(sol INTERFACE LUA_USE_APPLE)
endif()